<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UAF CGPA Calculator</title>
  <meta name="description" content="UAF CGPA Calculator that fetches your results directly from UAF LMS. Built for University of Agriculture Faisalabad students." />
  
  <!-- Brand -->
  <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico" />

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Theme Styles -->
  <style>
    :root{
      --brand:#7a6ad8;
      --brand-600:#6b5fca;
      --brand-700:#5d52b8;
      --text:#1b1f24;
      --muted:#6b7280;
      --radius:1.25rem;
    }
    html,body{font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;}
    body{background:linear-gradient(180deg,#f8f9ff 0%, #ffffff 70%); min-height: 100vh; margin: 0; padding: 0;}
    .navbar{backdrop-filter:saturate(180%) blur(12px); background-color:rgba(255,255,255,.7);}
    .navbar .navbar-brand{font-weight:800; letter-spacing:.3px; color:var(--brand);}

    .btn-brand{--bs-btn-bg:var(--brand); --bs-btn-border-color:var(--brand); --bs-btn-hover-bg:var(--brand-600); --bs-btn-hover-border-color:var(--brand-600);}
    .btn-soft{background:#f2f0ff; color:var(--brand);}
    .badge-brand{background:var(--brand);}

    .btn-primary-action{
      background: linear-gradient(180deg,var(--brand),var(--brand-700));
      color: #fff;
      border: 0;
      box-shadow: 0 6px 18px rgba(122,106,216,.12);
      cursor: pointer;
    }
    .btn-primary-action:hover {
      background: linear-gradient(180deg,var(--brand-600),var(--brand-700));
      color: #fff;
      transform: translateY(-2px);
    }
    .btn-secondary-action{
      background: #fff;
      color: var(--brand);
      border: 1px solid rgba(122,106,216,.12);
      cursor: pointer;
    }
    .btn-secondary-action:hover {
      background: #f8f9ff;
      color: var(--brand);
    }
    .btn-danger-action {
      background: #e74c3c;
      color: white;
      border: 0;
      cursor: pointer;
    }
    .btn-danger-action:hover {
      background: #c0392b;
      color: white;
    }
    .btn-success-action {
      background: #10ac84;
      color: white;
      border: 0;
      cursor: pointer;
    }
    .btn-success-action:hover {
      background: #0d916b;
      color: white;
    }

    .hero{padding: 6rem 0 3rem;}
    .hero h1{font-weight:800; line-height:1.05;}
    .hero .lead{color:#4b5563;}

    .card-modern{border:0; border-radius:var(--radius); box-shadow:0 10px 30px rgba(17,24,39,.06);}
    .card-modern .card-header{border:0; border-top-left-radius:var(--radius); border-top-right-radius:var(--radius); background:linear-gradient(180deg, rgba(122,106,216,.15), rgba(122,106,216,.05));}
    .form-select, .form-control{border-radius: .85rem;}
    label{font-weight:600;}

    .subject-row{border:1px dashed #e5e7eb; border-radius:1rem; padding:1rem; background:#fff;}
    .result-display{font-size:1.75rem; font-weight:800; color:var(--brand);}

    /* Loading animation styles */
    .loading-container {
      display: none;
      text-align: center;
      padding: 2rem;
      border-radius: var(--radius);
      background: #f8f9ff;
      margin: 1.5rem 0;
    }
    
    .loading-animation {
      width: 80px;
      height: 80px;
      margin: 0 auto 1.5rem;
      position: relative;
    }
    
    .loading-book {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transform: rotateX(-10deg);
      animation: bookFloat 3s ease-in-out infinite;
    }
    
    .book-cover {
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, var(--brand), var(--brand-700));
      border-radius: 5px 12px 12px 5px;
      transform-origin: left;
      box-shadow: 4px 4px 10px rgba(0,0,0,0.1);
    }
    
    .book-page {
      position: absolute;
      width: 95%;
      height: 90%;
      background: white;
      top: 5%;
      left: 2.5%;
      border-radius: 3px 10px 10px 3px;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    
    .book-page::before {
      content: "";
      position: absolute;
      width: 100%;
      height: 20px;
      background: linear-gradient(to bottom, rgba(0,0,0,0.03) 0%, transparent 100%);
      animation: pageTurn 2s ease-in-out infinite;
    }
    
    .loading-dots {
      display: flex;
      justify-content: center;
      gap: 6px;
      margin-top: 1rem;
    }
    
    .loading-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--brand);
      animation: dotPulse 1.5s ease-in-out infinite;
    }
    
    .loading-dot:nth-child(2) {
      animation-delay: 0.2s;
    }
    
    .loading-dot:nth-child(3) {
      animation-delay: 0.4s;
    }
    
    .loading-text {
      font-weight: 600;
      margin-top: 1rem;
      color: var(--brand);
      font-size: 1.1rem;
    }
    
    .loading-subtext {
      color: var(--muted);
      margin-top: 0.5rem;
    }
    
    @keyframes bookFloat {
      0%, 100% { transform: rotateX(-10deg) translateY(0); }
      50% { transform: rotateX(-5deg) translateY(-10px); }
    }
    
    @keyframes pageTurn {
      0%, 100% { transform: translateY(0); opacity: 0.5; }
      50% { transform: translateY(40px); opacity: 0.8; }
    }
    
    @keyframes dotPulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.5); opacity: 0.7; }
    }

    .status-log {
      max-height: 300px;
      overflow-y: auto;
      background: #f8f9fa;
      border-radius: 0.5rem;
      padding: 1rem;
      font-family: monospace;
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }
    .status-line {
      margin-bottom: 0.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid #e9ecef;
      cursor: pointer;
    }
    .status-line:last-child {
      margin-bottom: 0;
      border-bottom: none;
    }
    .status-success { color: #28a745; }
    .status-error { color: #dc3545; }
    .status-warning { color: #fd7e14; }
    .status-info { color: var(--brand); }

    .footer{color:#9ca3af;}
    a{color:var(--brand); text-decoration:none; cursor: pointer;}
    a:hover{color:#9f8df0;}

    /* Toast notifications */
    #toast-container {
      position: fixed;
      top: 25px;
      right: 20px;
      z-index: 9999;
      display: flex;
      flex-direction: column-reverse;
      gap: 10px;
    }

    .toast {
      background: white;
      border-radius: 8px;
      padding: 16px 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      min-width: 300px;
      max-width: 400px;
      transform: translateX(100%);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
      position: relative;
      overflow: hidden;
      border-left: 4px solid var(--brand);
    }

    .toast.show {
      transform: translateX(0);
      opacity: 1;
    }

    .toast-success {
      border-left-color: #10ac84;
    }

    .toast-error {
      border-left-color: #e74c3c;
    }

    .toast-warning {
      border-left-color: #f39c12;
    }

    .toast-info {
      border-left-color: #3498db;
    }

    .toast-content {
      display: flex;
      align-items: center;
      width: 100%;
    }

    .toast-icon {
      margin-right: 12px;
      font-size: 20px;
    }

    .toast-success .toast-icon {
      color: #10ac84;
    }

    .toast-error .toast-icon {
      color: #e74c3c;
    }

    .toast-warning .toast-icon {
      color: #f39c12;
    }

    .toast-info .toast-icon {
      color: #3498db;
    }

    .toast-message {
      flex: 1;
      font-weight: 500;
      font-size: 14px;
      color: #2d3748;
    }

    .toast-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      width: 100%;
      background: rgba(0, 0, 0, 0.1);
      transform: scaleX(1);
      transform-origin: left;
      animation: toastProgress 3s linear forwards;
    }

    .toast-success .toast-progress {
      background: linear-gradient(to right, #10ac84, #0d916b);
    }

    .toast-error .toast-progress {
      background: linear-gradient(to right, #e74c3c, #c0392b);
    }

    .toast-warning .toast-progress {
      background: linear-gradient(to right, #f39c12, #e67e22);
    }

    .toast-info .toast-progress {
      background: linear-gradient(to right, #3498db, #2980b9);
    }

    @keyframes toastProgress {
      from { transform: scaleX(1); }
      to { transform: scaleX(0); }
    }

    /* GPA Result Display */
    .gpa-result-card {
      background: white;
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: 0 10px 30px rgba(17,24,39,.06);
      margin-bottom: 2rem;
    }
    
    .semester-card {
      background: white;
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: 0 10px 30px rgba(17,24,39,.06);
      margin-bottom: 1.5rem;
      position: relative;
    }
    
    .delete-semester {
      position: absolute;
      top: 1rem;
      right: 1rem;
      cursor: pointer;
      color: #dc3545;
      font-size: 1.2rem;
    }
    
    .add-course-btn {
      position: absolute;
      top: 1rem;
      right: 3rem;
      cursor: pointer;
      color: var(--brand);
      font-size: 1.2rem;
    }
    
    .course-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    
    .course-table th, .course-table td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .course-table th {
      font-weight: 600;
      color: var(--muted);
    }
    
    .grade-badge {
      padding: 0.25rem 0.5rem;
      border-radius: 0.375rem;
      font-weight: 600;
      font-size: 0.75rem;
    }
    
    .grade-A { background-color: #dcfce7; color: #166534; }
    .grade-B { background-color: #dbeafe; color: #1e40af; }
    .grade-C { background-color: #fef3c7; color: #92400e; }
    .grade-D { background-color: #fee2e2; color: #991b1b; }
    .grade-F { background-color: #f3f4f6; color: #374151; }
    
    .extra-enrolled {
      background-color: #fff3cd;
      color: #856404;
      padding: 0.15rem 0.35rem;
      border-radius: 0.25rem;
      font-size: 0.7rem;
      margin-left: 0.5rem;
    }
    
    .course-details-modal .modal-content {
      border-radius: var(--radius);
    }
    
    .course-details-modal .modal-header {
      background: linear-gradient(180deg, rgba(122,106,216,.15), rgba(122,106,216,.05));
      border-top-left-radius: var(--radius);
      border-top-right-radius: var(--radius);
    }
    
    .save-to-web-btn {
      margin: 1.5rem auto;
      display: block;
    }
    
    /* Saved Results Section */
    .saved-results-container {
      display: none;
      margin-top: 2rem;
    }
    
    .saved-result-card {
      background: white;
      border-radius: var(--radius);
      padding: 1rem;
      box-shadow: 0 5px 15px rgba(17,24,39,.06);
      margin-bottom: 1rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .saved-result-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(17,24,39,.1);
    }
    
    .saved-result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .saved-result-date {
      font-size: 0.8rem;
      color: var(--muted);
    }
    
    .saved-result-actions {
      display: flex;
      gap: 0.5rem;
    }
    
    .saved-result-action-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: var(--muted);
      font-size: 0.9rem;
    }
    
    .saved-result-action-btn:hover {
      color: var(--brand);
    }
    
    /* Add Course Form */
    .add-course-form {
      background: #f8f9fa;
      border-radius: 0.5rem;
      padding: 1rem;
      margin-top: 1rem;
      display: none;
    }
    
    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .form-group {
      flex: 1;
      min-width: 200px;
    }

    /* Width constraints for calculator and student info sections */
    .calculator-container {
      max-width: 720px;
      margin-left: auto;
      margin-right: auto;
    }
    
    /* Semester results container - full width */
    .semester-results-container {
      width: 100%;
    }

    /* ----------- DARK MODE IMPROVED ----------- */
    [data-theme="dark"] body{background:linear-gradient(180deg,#0b0e13 0%, #0f1320 70%); color:#f1f5f9;}
    [data-theme="dark"] .navbar{background-color:rgba(17,24,39,.75);}
    [data-theme="dark"] .navbar .nav-link{color:#d1d5db;}
    [data-theme="dark"] .navbar .nav-link:hover{color:#fff;}
    [data-theme="dark"] .card-modern{background:#0f1422; color:#e5e7eb;}
    [data-theme="dark"] .card-modern .card-header{background:linear-gradient(180deg, rgba(122,106,216,.25), rgba(122,106,216,.1));}
    [data-theme="dark"] h1, [data-theme="dark"] h2, [data-theme="dark"] h3, [data-theme="dark"] h4, [data-theme="dark"] h5{color:#ffffff;}
    [data-theme="dark"] .lead{color:#9ca3af;}
    [data-theme="dark"] .subject-row{background:#1a1f2e; border-color:#2d3748;}
    [data-theme="dark"] label{color:#e5e7eb;}
    [data-theme="dark"] .form-control, [data-theme="dark"] .form-select{background:#0b1020; color:#f1f5f9; border-color:#374151;}
    [data-theme="dark"] .form-control::placeholder{color:#9ca3af;}
    [data-theme="dark"] .input-group-text{background:#1f2937; color:#e5e7eb;}
    [data-theme="dark"] .footer{color:#9ca3af;}
    [data-theme="dark"] a{color: rgb(122, 106, 216);}
    [data-theme="dark"] a:hover{color:#9f8df0;}
    [data-theme="dark"] .status-log { background: #1a2030; }
    [data-theme="dark"] .status-line { border-bottom-color: #2d3748; }
    [data-theme="dark"] .gpa-result-card { background: #1a2030; }
    [data-theme="dark"] .semester-card { background: #1a2030; }
    [data-theme="dark"] .course-table th, 
    [data-theme="dark"] .course-table td { border-bottom-color: #2d3748; }
    [data-theme="dark"] .saved-result-card { background: #1a2030; }
    [data-theme="dark"] .add-course-form { background: #1a1f2e; }
    [data-theme="dark"] .loading-container { background: #1a2030; }
    
    /* Dark mode for course details modal */
    [data-theme="dark"] .course-details-modal .modal-content {
      background: #1a2030;
      color: #e5e7eb;
    }
    
    [data-theme="dark"] .course-details-modal .modal-header {
      background: linear-gradient(180deg, rgba(122,106,216,.25), rgba(122,106,216,.1));
      border-bottom-color: #2d3748;
    }
    
    [data-theme="dark"] .course-details-modal .modal-header .btn-close {
      filter: invert(1);
    }
    
    [data-theme="dark"] .course-details-modal .alert-info {
      background-color: rgba(23, 162, 184, 0.2);
      border-color: rgba(23, 162, 184, 0.3);
      color: #71d4f0;
    }
    
    [data-theme="dark"] .course-details-modal .alert-warning {
      background-color: rgba(255, 193, 7, 0.2);
      border-color: rgba(255, 193, 7, 0.3);
      color: #ffd351;
    }

    /* Dark mode contrast improvements */
    [data-theme="dark"] .text-body-secondary {
      color: #d1d5db !important;
    }
    
    [data-theme="dark"] .btn-primary-action {
      color: #ffffff !important;
    }

    .cursor-dot{position:fixed; width:10px;height:10px;border-radius:50%; background:var(--brand); pointer-events:none; transform:translate(-50%, -50%); opacity:.7; mix-blend-mode:multiply; z-index:9999;}
    
    /* Course action buttons */
    .course-actions i {
      cursor: pointer;
      font-size: 14px;
      padding: 4px;
      border-radius: 4px;
    }
    
    .delete-course {
      color: #dc3545;
    }
    
    .delete-course:hover {
      background-color: rgba(220, 53, 69, 0.1);
    }
    
    .restore-course {
      color: #10ac84;
    }
    
    .restore-course:hover {
      background-color: rgba(16, 172, 132, 0.1);
    }
    
    /* Clickable info icon */
    .clickable-info {
      cursor: pointer;
      color: var(--brand);
    }
    
    .clickable-info:hover {
      opacity: 0.8;
    }
    
    /* Student info section adjustments */
    .student-info-section {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .student-details {
      flex: 1;
      min-width: 300px;
    }
    
    .cgpa-display {
      flex: 0 0 auto;
      text-align: left;
      min-width: 200px;
    }
    
    /* Center buttons only in specific sections */
    .scraping-section .center-buttons,
    .log-section .center-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    
    /* Mobile responsive adjustments */
    @media (max-width: 768px) {
      .student-info-section {
        flex-direction: column;
      }
      
      .cgpa-display {
        text-align: left;
        margin-top: 1rem;
      }
      
      .scraping-section .center-buttons,
      .log-section .center-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      .scraping-section .center-buttons .btn,
      .log-section .center-buttons .btn {
        width: 100%;
        max-width: 300px;
      }
    }
  </style>
</head>
<body>
  <!-- Custom cursor -->
  <div class="cursor-dot" id="cursorDot"></div>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg sticky-top border-bottom">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="/">
        <span class="badge rounded-pill badge-brand">UAF</span>
        <span>CGPA <span class="text-body-secondary">Calculator</span></span>
      </a>

      <div class="d-flex align-items-center gap-2 order-lg-2">
        <button id="themeToggle" class="btn btn-sm btn-soft rounded-pill" type="button" style="margin-bottom: 0rem;" aria-label="Toggle dark mode">
          <i class="fa-solid fa-moon"></i>
        </button>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>

      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav ms-auto align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="index.html#Home">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="index.html#CGPA-Calculator">Manual Calculator</a></li>
          <li class="nav-item"><a class="nav-link" href="uaf-results.html">UAF Results</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact-us">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero" id="Home">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-lg-7">
          <span class="badge rounded-pill badge-brand mb-3">University of Agriculture Faisalabad</span>
          <h1 class="display-5 mb-3">Calculate Your <span style="color:var(--brand)">CGPA Automatically</span><br/>from UAF LMS</h1>
          <p class="lead mb-4">Enter your <strong>registration number</strong> to fetch your results directly from UAF LMS. The calculator will automatically compute your CGPA and Percentage based on UAF grading system.</p>
          <div class="d-flex gap-2">
            <a href="#Auto-Calculator" 
               class="btn btn-primary-action btn-lg rounded-pill" 
               style="font-size: 1.05rem; padding: 0.9rem;">
              <i class="fa-solid fa-bolt me-2"></i>Try It Now
            </a>
            <a href="index.html#CGPA-Calculator" class="btn btn-secondary-action rounded-pill" style="display:block; padding:14px">
              <i class="fa-solid fa-calculator me-2"></i>Manual Calculator
            </a>
          </div>
        </div>
        <div class="col-lg-5">
          <div class="card card-modern">
            <div class="card-body p-4">
              <div class="d-flex align-items-center gap-3">
                <div class="display-6" style="color:var(--brand);"><i class="fa-solid fa-robot"></i></div>
                <div>
                  <h5 class="mb-1 fw-bold">Automatic CGPA Calculation</h5>
                  <p class="mb-0 text-body-secondary">No manual inputs needed. Just enter your registration number.</p>
                </div>
              </div>
              <hr class="my-4" />
              <ul class="list-unstyled m-0">
                <li class="d-flex align-items-center gap-2 mb-2"><i class="fa-solid fa-check text-success"></i> Fetches results directly from UAF LMS</li>
                <li class="d-flex align-items-center gap-2 mb-2"><i class="fa-solid fa-check text-success"></i> Automatic CGPA calculation</li>
                <li class="d-flex align-items-center gap-2"><i class="fa-solid fa-check text-success"></i> Same accurate UAF grading system</li>
              </ul>
            </div>
          </div>
        </div>
      </div><!-- /row -->
    </div>
  </section>

  <!-- Automatic Calculator Section -->
  <section class="py-5" id="Auto-Calculator">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-12">
          
          <!-- Input Section -->
          <div class="card card-modern mb-4 calculator-container">
            <div class="card-header p-4">
              <h4 class="mb-0"><i class="fa-solid fa-bolt me-2"></i>UAF CGPA Calculator</h4>
            </div>
            <div class="card-body p-4 scraping-section">
              <form id="resultForm">
                <div class="mb-3">
                  <label for="registrationNumber" class="form-label">Registration Number</label>
                  <input type="text" class="form-control" id="registrationNumber" 
                         placeholder="e.g., 2020-ag-1234" required>
                  <div class="form-text">Enter your UAF registration number</div>
                </div>
                
                <div class="center-buttons">
                  <button type="submit" class="btn btn-primary-action rounded-pill">
                    <i class="fa-solid fa-cloud-arrow-down me-2"></i>Fetch Result
                  </button>
                  <button id="testConnectionBtn" type="button" class="btn test-connection-btn rounded-pill">
                    <i class="fa-solid fa-vial me-2"></i>Test Connection
                  </button>
                </div>
              </form>
              
              <!-- Loading Animation Section -->
              <div id="loadingContainer" class="loading-container">
                <div class="loading-animation">
                  <div class="loading-book">
                    <div class="book-cover"></div>
                    <div class="book-page"></div>
                  </div>
                </div>
                <div class="loading-dots">
                  <div class="loading-dot"></div>
                  <div class="loading-dot"></div>
                  <div class="loading-dot"></div>
                </div>
                <div class="loading-text" id="loadingText">Connecting to UAF LMS</div>
                <div class="loading-subtext" id="loadingSubtext">Please wait while we establish a secure connection</div>
              </div>
            </div>
          </div>
          
          <!-- Results Section -->
          <div id="resultContainer" class="result-container">
            <!-- Student Info and CGPA Section -->
            <div class="card card-modern mb-4 calculator-container">
              <div class="card-header p-4">
                <h4 class="mb-0"><i class="fa-solid fa-user-graduate me-2"></i>Student Information</h4>
              </div>
              <div class="card-body p-4">
                <div class="student-info-section">
                  <div class="d-flex align-items-center">
                    <div class="student-info-logo">
                      <i class="fa-solid fa-book-open"></i>
                    </div>
                    <div class="student-details">
                      <h2 class="mb-1 fw-bold" id="studentName">Student Name</h2>
                      <p class="mb-0 text-body-secondary" id="studentReg">Registration Number</p>
                    </div>
                  </div>
                  
                  <div class="cgpa-display">
                    <p class="mb-0 text-body-secondary">Total CGPA</p>
                    <p class="mb-0 display-6 fw-bold" style="color: var(--brand);" id="totalCgpa">0.00</p>
                    <p class="mb-0 text-body-secondary" id="totalPercentage">0%</p>
                  </div>
                </div>
                
                <!-- Save Button - Centered -->
                <div class="save-button-container">
                  <button id="saveToWebBtn" class="btn btn-primary-action rounded-pill save-to-web-btn">
                    <i class="fa-solid fa-cloud-arrow-up me-2"></i>Save to Web
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Semester Results Container - Full Width (No Outer Container) -->
            <div class="semester-results-container">
              <div class="container">
                <div id="semesterResults" class="row">
                  <!-- Semester cards will be dynamically inserted here -->
                </div>
              </div>
            </div>
          </div>
          
          <!-- Status Log Section -->
          <div class="card card-modern calculator-container">
            <div class="card-header p-4">
              <h4 class="mb-0"><i class="fa-solid fa-terminal me-2"></i>Status Log</h4>
            </div>
            <div class="card-body p-4">
              <!-- Status Log -->
              <div class="status-log" id="statusLog">
                <div class="status-line status-info">Ready to fetch your results. Enter your registration number and click "Fetch Result".</div>
              </div>
              
              <!-- Log Action Buttons -->
              <div class="log-section center-buttons mt-3">
                <button id="downloadLogBtn" class="btn btn-secondary-action rounded-pill">
                  <i class="fa-solid fa-file-lines me-2"></i>Download Log
                </button>
                <button id="clearLogBtn" class="btn btn-danger-action rounded-pill">
                  <i class="fa-solid fa-trash me-2"></i>Clear Log
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Vendor JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- App JS -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Elements
      const resultForm = document.getElementById('resultForm');
      const registrationNumber = document.getElementById('registrationNumber');
      const loadingContainer = document.getElementById('loadingContainer');
      const loadingText = document.getElementById('loadingText');
      const loadingSubtext = document.getElementById('loadingSubtext');
      const resultContainer = document.getElementById('resultContainer');
      const testConnectionBtn = document.getElementById('testConnectionBtn');
      const statusLog = document.getElementById('statusLog');
      const themeToggle = document.getElementById('themeToggle');
      const cursorDot = document.getElementById('cursorDot');
      const downloadLogBtn = document.getElementById('downloadLogBtn');
      const clearLogBtn = document.getElementById('clearLogBtn');
      const semesterResults = document.getElementById('semesterResults');
      const studentName = document.getElementById('studentName');
      const studentReg = document.getElementById('studentReg');
      const totalCgpa = document.getElementById('totalCgpa');
      const totalPercentage = document.getElementById('totalPercentage');
      const saveToWebBtn = document.getElementById('saveToWebBtn');
      
      // State variables
      let allLogs = [];
      let testInProgress = false;
      
      // Initialize the application
      function init() {
        initCustomCursor();
        initTheme();
        createToastContainer();
      }
      
      // Initialize custom cursor
      function initCustomCursor() {
        document.addEventListener('mousemove', (e) => {
          cursorDot.style.display = window.innerWidth > 768 ? 'block' : 'none';
          cursorDot.style.left = e.clientX + 'px';
          cursorDot.style.top = e.clientY + 'px';
        });
      }
      
      // Theme toggle functionality
      function initTheme() {
        const THEME_KEY = 'uaf-theme';
        function applyTheme(theme){
          document.documentElement.setAttribute('data-theme', theme);
          localStorage.setItem(THEME_KEY, theme);
          themeToggle.innerHTML = theme === 'dark' ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
        }
        applyTheme(localStorage.getItem(THEME_KEY) || 'light');
        themeToggle.addEventListener('click', () => {
          const next = (localStorage.getItem(THEME_KEY) || 'light') === 'light' ? 'dark' : 'light';
          applyTheme(next);
        });
      }
      
      // Create a custom toast container
      function createToastContainer() {
        const toastContainer = document.createElement('div');
        toastContainer.id = 'toast-container';
        document.body.appendChild(toastContainer);
      }
      
      // Show toast notification
      function showToast(message, type = 'success') {
        const toastContainer = document.getElementById('toast-container');
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.innerHTML = `
          <div class="toast-content">
            <i class="toast-icon ${getToastIcon(type)}"></i>
            <span class="toast-message">${message}</span>
          </div>
          <div class="toast-progress"></div>
        `;
        
        toastContainer.appendChild(toast);
        
        // Animate in
        setTimeout(() => {
          toast.classList.add('show');
        }, 10);
        
        // Remove after delay
        setTimeout(() => {
          toast.classList.remove('show');
          setTimeout(() => {
            if (toast.parentNode) {
              toast.parentNode.removeChild(toast);
            }
          }, 300);
        }, 3000);
      }
      
      // Get icon for toast type
      function getToastIcon(type) {
        switch(type) {
          case 'success': return 'fa-solid fa-circle-check';
          case 'error': return 'fa-solid fa-circle-exclamation';
          case 'warning': return 'fa-solid fa-triangle-exclamation';
          case 'info': return 'fa-solid fa-circle-info';
          default: return 'fa-solid fa-circle-info';
        }
      }
      
      // Update loading animation text
      function updateLoadingText(mainText, subText) {
        loadingText.textContent = mainText;
        loadingSubtext.textContent = subText;
      }
      
      // Add a status message to the log
      function addStatusMessage(message, type = 'info') {
        const timestamp = new Date().toLocaleTimeString();
        const fullMessage = `[${timestamp}] ${message}`;
        
        // Add to all logs array
        allLogs.push({timestamp, message, type});
        
        const messageEl = document.createElement('div');
        messageEl.className = `status-line status-${type}`;
        messageEl.textContent = fullMessage;
        statusLog.prepend(messageEl);
        
        // Auto-scroll to top
        statusLog.scrollTop = 0;
      }
      
      // Download log
      function downloadLog() {
        addStatusMessage('Preparing log file for download...', 'info');
        
        // Create log content
        let logContent = "UAF CGPA Calculator - Activity Log\n";
        logContent += "============================================\n\n";
        
        allLogs.forEach(log => {
          logContent += `[${log.timestamp}] ${log.message}\n`;
        });
        
        // Create download link
        const blob = new Blob([logContent], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `cgpa_calculator_log_${new Date().toISOString().replace(/[:.]/g, '-')}.txt`;
        document.body.appendChild(a);
        a.click();
        
        // Clean up
        window.URL.revokeObjectURL(url);
        document.body.removeChild(a);
        
        addStatusMessage('Log file downloaded successfully', 'success');
        showToast('Log file downloaded!', 'success');
      }
      
      // Clear log
      function clearLog() {
        statusLog.innerHTML = '';
        allLogs = [];
        addStatusMessage('Log cleared', 'info');
        showToast('Log cleared', 'info');
      }
      
      // Test connection
      async function testConnection() {
        // Prevent multiple simultaneous test requests
        if (testInProgress) {
          addStatusMessage('Test connection already in progress', 'info');
          return;
        }
        
        testInProgress = true;
        testConnectionBtn.disabled = true;
        
        addStatusMessage('Testing connection to UAF LMS server...', 'info');
        updateLoadingText('Testing Connection', 'Checking UAF LMS accessibility');
        loadingContainer.style.display = 'block';
        
        // Simulate connection test
        setTimeout(() => {
          addStatusMessage('Connection test successful - UAF LMS is accessible', 'success');
          showToast('Connection test successful!', 'success');
          updateLoadingText('Connection Successful', 'UAF LMS is accessible');
          
          // Hide loading after a delay
          setTimeout(() => {
            loadingContainer.style.display = 'none';
            testInProgress = false;
            testConnectionBtn.disabled = false;
          }, 1500);
        }, 2000);
      }
      
      // Fetch result from UAF LMS
      async function fetchResult() {
        const regNum = registrationNumber.value.trim();
        
        if (!regNum) {
          showToast('Please enter a registration number', 'error');
          return;
        }
        
        // Show loading animation
        loadingContainer.style.display = 'block';
        resultContainer.style.display = 'none';
        saveToWebBtn.style.display = 'none';
        updateLoadingText('Connecting to UAF LMS', 'Establishing secure connection');
        addStatusMessage(`Fetching result for registration number: ${regNum}`, 'info');
        
        // Simulate fetching process
        setTimeout(() => {
          updateLoadingText('Authenticating', 'Verifying your registration details');
        }, 2000);
        
        setTimeout(() => {
          updateLoadingText('Fetching Results', 'Retrieving your academic records');
        }, 4000);
        
        setTimeout(() => {
          updateLoadingText('Processing Data', 'Calculating CGPA and grades');
        }, 6000);
        
        // Show results after simulation
        setTimeout(() => {
          loadingContainer.style.display = 'none';
          resultContainer.style.display = 'block';
          saveToWebBtn.style.display = 'block';
          
          // Update student info
          studentName.textContent = 'Ali Ahmed';
          studentReg.textContent = regNum;
          totalCgpa.textContent = '3.83';
          totalPercentage.textContent = '88.5%';
          
          // Add sample semester data
          semesterResults.innerHTML = `
            <div class="col-md-6 mb-4">
              <div class="semester-card">
                <h5 class="mb-3">
                  <i class="fa-solid fa-book-open me-2" style="color: var(--brand);"></i>
                  Spring 2023
                </h5>
                <div class="table-responsive">
                  <table class="course-table">
                    <thead>
                      <tr>
                        <th>Course</th>
                        <th>Hrs</th>
                        <th>Marks</th>
                        <th>Grade</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>CS-101</td>
                        <td>3</td>
                        <td>85</td>
                        <td><span class="grade-badge grade-A">A</span></td>
                      </tr>
                      <tr>
                        <td>MATH-101</td>
                        <td>3</td>
                        <td>78</td>
                        <td><span class="grade-badge grade-B">B+</span></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="text-right mt-3">
                  <p class="mb-0 text-body-secondary small">Semester GPA: 3.75</p>
                </div>
              </div>
            </div>
            
            <div class="col-md-6 mb-4">
              <div class="semester-card">
                <h5 class="mb-3">
                  <i class="fa-solid fa-book-open me-2" style="color: var(--brand);"></i>
                  Fall 2023
                </h5>
                <div class="table-responsive">
                  <table class="course-table">
                    <thead>
                      <tr>
                        <th>Course</th>
                        <th>Hrs</th>
                        <th>Marks</th>
                        <th>Grade</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>CS-201</td>
                        <td>3</td>
                        <td>92</td>
                        <td><span class="grade-badge grade-A">A</span></td>
                      </tr>
                      <tr>
                        <td>MATH-201</td>
                        <td>3</td>
                        <td>88</td>
                        <td><span class="grade-badge grade-A">A-</span></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="text-right mt-3">
                  <p class="mb-0 text-body-secondary small">Semester GPA: 3.92</p>
                </div>
              </div>
            </div>
          `;
          
          addStatusMessage('CGPA calculated successfully', 'success');
          showToast('Result fetched successfully!', 'success');
        }, 8000);
      }
      
      // Event listeners
      resultForm.addEventListener('submit', function(e) {
        e.preventDefault();
        fetchResult();
      });
      
      testConnectionBtn.addEventListener('click', testConnection);
      
      downloadLogBtn.addEventListener('click', downloadLog);
      
      clearLogBtn.addEventListener('click', clearLog);
      
      saveToWebBtn.addEventListener('click', function() {
        showToast('Results saved to web storage!', 'success');
        addStatusMessage('Results saved to web storage', 'info');
      });
      
      // Initialize the application
      init();
    });
  </script>
</body>
</html>
